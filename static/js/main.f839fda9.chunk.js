(this.webpackJsonpjothello=this.webpackJsonpjothello||[]).push([[0],{14:function(e,t,r){"use strict";r.r(t);var n,a=r(12),o=r(6),c=r.n(o),i=r(8),u=r(9),s=r(10),l=r(13),d=r(1),f=r(3),v=r(0),h=r(2),j=r(11),b=r.n(j);r(21);function p(e){return new Promise((function(t){return setTimeout(t,e)}))}function O(e){return e===n.HUMAN?"\ud83d\udc4d":e===n.BOT?"\ud83e\udd16":""}function g(e){return e?n.HUMAN:n.BOT}function m(e){return"".concat(e[0],",").concat(e[1])}function M(e){var t=e.split(",").map(Number);if(2===t.length)return t;throw new Error("Cannot convert given string to Coordinate!")}function y(e){var t,r=[],n=Object(f.a)(e);try{for(n.s();!(t=n.n()).done;){var a,o=t.value,c=[],i=Object(f.a)(o);try{for(i.s();!(a=i.n()).done;){var u=a.value;c.push(Object(l.a)({},u))}}catch(s){i.e(s)}finally{i.f()}r.push(c)}}catch(s){n.e(s)}finally{n.f()}return r}!function(e){e[e.HUMAN=0]="HUMAN",e[e.BOT=1]="BOT",e[e.FREE=2]="FREE"}(n||(n={}));var k=function(){function e(t,r,n,a){Object(u.a)(this,e),this.categorizer=void 0,this.comparator=void 0,this.boardWidth=void 0,this.boardHeight=void 0,this.moves=void 0,this.categorizer=t,this.comparator=r,this.boardWidth=n,this.boardHeight=a,this.moves=new Map}return Object(s.a)(e,[{key:"tryAddMove",value:function(e,t){return!!(this.categorizer(M(e),this.boardWidth,this.boardHeight)&&t.length>0)&&(this.moves.set(e,t),!0)}},{key:"getBestMove",value:function(){var e=function(e,t){var r,n=void 0,a=void 0,o=Object(f.a)(e);try{for(o.s();!(r=o.n()).done;){var c=Object(d.a)(r.value,2),i=c[0],u=c[1];(!n||!a||t(n,a,i,u)>0)&&(n=i,a=u)}}catch(s){o.e(s)}finally{o.f()}return n}(this.moves,this.comparator)||"";return[e,this.moves.get(e)||[]]}},{key:"hasMoves",value:function(){return this.moves.size>0}}]),e}();function x(e,t,r){var n=Object(d.a)(e,2),a=n[0],o=n[1];return(0===a||a===t-1)&&(0===o||o===r-1)}function B(e,t,r){var n=Object(d.a)(e,2),a=n[0],o=n[1];return!x([a,o],r,t)&&(a<=1||a>=t-2)&&(o<=1||o>=r-2)}function w(e,t,r){var n=Object(d.a)(e,2),a=n[0],o=n[1];return!x([a,o],r,t)&&!B([a,o],r,t)&&(0===a||a===t-1||0===o||o===r-1)}function N(e,t,r){var n=Object(d.a)(e,2),a=n[0],o=n[1];return!B([a,o],r,t)&&(1===a||a===t-2||1===o||o===r-2)}function H(){return!x.apply(void 0,arguments)&&!B.apply(void 0,arguments)&&!w.apply(void 0,arguments)&&!N.apply(void 0,arguments)}function F(e,t){for(var r=0;r<e.length;++r)for(var n=0;n<e[r].length;++n)t(e[r][n],n,r)}function E(e,t,r,a,o,c){for(var i=[];;){if(r+=o,(t+=a)<0||t>=e[0].length||r<0||r>=e.length)return[];if(e[r][t].marker===n.FREE)return[];if(e[r][t].marker===c)return i;i.push([t,r])}}function A(e,t){var r=new Map;return F(e,(function(a,o,c){var i=function(e,t,r,a){if(e[r][t].marker!==n.FREE)return[];for(var o=[],c=-1;c<=1;++c)for(var i=-1;i<=1;++i)o=o.concat(E(e,t,r,c,i,a));return o}(e,o,c,t);i.length>0&&r.set(m([o,c]),i)})),r}function T(e,t,r,n){e[r[1]][r[0]].marker=t;var a,o=Object(f.a)(n);try{for(o.s();!(a=o.n()).done;){var c=Object(d.a)(a.value,2),i=c[0];e[c[1]][i].marker=t}}catch(u){o.e(u)}finally{o.f()}}function U(e){var t=A(e,n.BOT);if(0===t.size)return 0;var r,a=e.length,o=e[0].length,c=function(e,t,r,n){return n.length-t.length},i=function(e,t,r,n){return t.length-n.length},u=[new k(x,c,o,a),new k(w,c,o,a),new k(H,i,o,a),new k(N,i,o,a),new k(B,i,o,a)],s="",l=[],v=Object(f.a)(t);try{for(v.s();!(r=v.n()).done;)for(var h=Object(d.a)(r.value,1)[0],j=0;j<u.length&&!u[j].tryAddMove(h,t.get(h)||[]);++j);}catch(P){v.e(P)}finally{v.f()}for(var b=0;b<u.length;++b)if(u[b].hasMoves()){var p=u[b].getBestMove();if(s=p[0],l=p[1],s)break}var O=M(s),g=Object(d.a)(O,2),m=g[0],y=g[1];T(e,n.BOT,[m,y],l),e[y][m].justPlaced=!0;var F,E=Object(f.a)(l);try{for(E.s();!(F=E.n()).done;){var U=Object(d.a)(F.value,2),S=U[0];e[U[1]][S].justFlipped=!0}}catch(P){E.e(P)}finally{E.f()}return l.length}function S(e){var t,r=e.value,a=e.onClick,o=e.handleMouseEnter,c=e.handleMouseLeave,i="square";return r.isValidMove&&(i+=" valid-move"),r.wouldBeFlipped&&(i+=" would-be-flipped"),r.noLongerWouldBeFlipped&&(i+=" no-longer-would-be-flipped"),r.justPlaced&&(i+=" just-placed"),r.justFlipped&&(i+=" just-flipped"),Object(v.jsx)("td",{className:i,onClick:a,onMouseEnter:o,onMouseLeave:c,children:Object(v.jsxs)("div",{className:"square-container",children:[Object(v.jsx)("div",{className:"square-front",children:O(r.marker)}),Object(v.jsx)("div",{className:"square-back",children:O((t=r.marker,g(t!==n.HUMAN)))})]})})}function P(e){var t=e.boardWidth,r=e.boardHeight,a=e.nextPlayer,o=e.isGameOver,u=e.score,s=e.gameIsOver,l=e.otherPlayersTurn,j=e.updateScore,b=Object(h.useState)(function(e,t,r){for(var a=[],o=0;o<t;++o){for(var c=[],i=0;i<e;++i)c.push({marker:n.FREE,isValidMove:!1,wouldBeFlipped:!1,noLongerWouldBeFlipped:!1,justPlaced:!1,justFlipped:!1});a.push(c)}var u=Math.floor(e/2),s=Math.floor(t/2);return a[s][u].marker=n.BOT,a[s][u-1].marker=n.HUMAN,a[s-1][u].marker=n.HUMAN,a[s-1][u-1].marker=n.BOT,A(a,r).forEach((function(e,t){var r=M(t),n=Object(d.a)(r,2),o=n[0],c=n[1];a[c][o].isValidMove=!0})),a}(t,r,n.HUMAN)),O=Object(d.a)(b,2),g=O[0],k=O[1],x=Object(h.useState)(A(g,n.HUMAN)),B=Object(d.a)(x,2),w=B[0],N=B[1];Object(h.useEffect)((function(){(function(){var e=Object(i.a)(c.a.mark((function e(){var t,r,i,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a===n.BOT&&!o){e.next=2;break}return e.abrupt("return");case 2:return t=y(g),r=!1,i=U(t),e.next=7,p(i?500:0);case 7:(u=A(t,n.HUMAN)).size>0?(l(),F(t,(function(e,t,r){e.isValidMove=u.has(m([t,r]))}))):0===i&&(r=!0),r&&s(),k(t),N(u),j(i,n.BOT);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[u]);var H=function(e,t,r){var n=m([e,t]);if(w.has(n)){var a=r?function(e){e.wouldBeFlipped=!0,e.noLongerWouldBeFlipped=!1}:function(e){e.wouldBeFlipped=!1,e.noLongerWouldBeFlipped=!0};k((function(e){var t,r=y(e),o=Object(f.a)(w.get(n)||[]);try{for(o.s();!(t=o.n()).done;){var c=Object(d.a)(t.value,2),i=c[0],u=c[1];a(r[u][i])}}catch(s){o.e(s)}finally{o.f()}return r}))}};return Object(v.jsx)("div",{children:Object(v.jsx)("table",{children:Object(v.jsx)("tbody",{children:g.map((function(e,t){return Object(v.jsx)("tr",{className:"board-row",children:e.map((function(e,r){return Object(v.jsx)(S,{value:e,onClick:function(){return function(e,t){var r;if(!o){var a=m([e,t]);if(w.has(a)){var c=y(g);T(c,n.HUMAN,[e,t],w.get(a)||[]);var i=(null===(r=w.get(a))||void 0===r?void 0:r.length)||0;F(c,(function(e){e.isValidMove=!1,e.wouldBeFlipped=!1,e.justPlaced=!1,e.justFlipped=!1,e.noLongerWouldBeFlipped=!1})),l(),k(c),N(new Map),j(i,n.HUMAN)}}}(r,t)},handleMouseEnter:function(){return H(r,t,!0)},handleMouseLeave:function(){return H(r,t,!1)}},m([r,t]))}))},t)}))})})})}function W(){var e=Object(h.useState)(!0),t=Object(d.a)(e,2),r=t[0],o=t[1],c=g(r),i=Object(h.useState)(!1),u=Object(d.a)(i,2),s=u[0],l=u[1],f=Object(h.useState)([2,2]),j=Object(d.a)(f,2),b=j[0],p=j[1],m=Object(h.useState)(0),M=Object(d.a)(m,2),y=M[0],k=M[1],x=Object(h.useState)("The game is about to begin."),B=Object(d.a)(x,2),w=B[0],N=B[1];return Object(h.useEffect)((function(){if(s){var e=b[0]>b[1]?n.HUMAN:n.BOT;N("Game over. Player ".concat(O(e)," wins."))}}),[s]),Object(v.jsxs)("div",{className:"game",children:[Object(v.jsxs)("p",{children:[Object(v.jsx)("span",{className:"human-score"+(r&&!s?" next-player":""),children:"".concat(O(n.HUMAN)," : ").concat(b[0].toString().padStart(2,"0"))}),"\u2003",Object(v.jsx)("span",{className:"bot-score"+(r||s?"":" next-player"),children:"".concat(O(n.BOT)," : ").concat(b[1].toString().padStart(2,"0"))}),"\u2003",s&&Object(v.jsx)("button",{onClick:function(){o(!0),l(!1),p([2,2]),k((function(e){return e+1})),N("The game is about to begin.")},children:"Reset"})]}),Object(v.jsx)("div",{id:"game-board",children:Object(v.jsx)(P,{boardWidth:8,boardHeight:8,nextPlayer:c,isGameOver:s,score:b,gameIsOver:function(){return l(!0)},otherPlayersTurn:function(){return o(!r)},updateScore:function(e,t){0!==e&&(p((function(r){var o=Object(a.a)(r);return t===n.HUMAN?(o[0]+=1+e,o[1]-=e):(o[0]-=e,o[1]+=1+e),o})),N("Player ".concat(O(t)," flipped ").concat(e," piece").concat(e>1?"s":"",".")))}},y)}),Object(v.jsx)("p",{children:w})]})}b.a.render(Object(v.jsx)(W,{}),document.getElementById("root"))},21:function(e,t,r){}},[[14,1,2]]]);
//# sourceMappingURL=main.f839fda9.chunk.js.map