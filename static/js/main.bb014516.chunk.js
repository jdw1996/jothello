(this.webpackJsonpjothello=this.webpackJsonpjothello||[]).push([[0],{13:function(e,t,r){e.exports=r(14)},14:function(e,t,r){"use strict";r.r(t);var n,a=r(11),o=r(5),c=r.n(o),u=r(7),i=r(8),l=r(9),s=r(12),f=r(1),v=r(2),d=r(0),h=r.n(d),p=r(10),m=r.n(p);r(20);function b(e){return new Promise((function(t){return setTimeout(t,e)}))}function O(e){return e===n.HUMAN?"\ud83d\udc4d":e===n.BOT?"\ud83e\udd16":""}function j(e){return e?n.HUMAN:n.BOT}function g(e){return"".concat(e[0],",").concat(e[1])}function y(e){var t=e.split(",").map(Number);if(2===t.length)return t;throw new Error("Cannot convert given string to Coordinate!")}function E(e){var t,r=[],n=Object(v.a)(e);try{for(n.s();!(t=n.n()).done;){var a,o=t.value,c=[],u=Object(v.a)(o);try{for(u.s();!(a=u.n()).done;){var i=a.value;c.push(Object(s.a)({},i))}}catch(l){u.e(l)}finally{u.f()}r.push(c)}}catch(l){n.e(l)}finally{n.f()}return r}!function(e){e[e.HUMAN=0]="HUMAN",e[e.BOT=1]="BOT",e[e.FREE=2]="FREE"}(n||(n={}));var M=function(){function e(t,r,n,a){Object(i.a)(this,e),this.categorizer=void 0,this.comparator=void 0,this.boardWidth=void 0,this.boardHeight=void 0,this.moves=void 0,this.categorizer=t,this.comparator=r,this.boardWidth=n,this.boardHeight=a,this.moves=new Map}return Object(l.a)(e,[{key:"tryAddMove",value:function(e,t){return!!(this.categorizer(y(e),this.boardWidth,this.boardHeight)&&t.length>0)&&(this.moves.set(e,t),!0)}},{key:"getBestMove",value:function(){var e=function(e,t){var r,n=void 0,a=void 0,o=Object(v.a)(e);try{for(o.s();!(r=o.n()).done;){var c=Object(f.a)(r.value,2),u=c[0],i=c[1];(!n||!a||t(n,a,u,i)>0)&&(n=u,a=i)}}catch(l){o.e(l)}finally{o.f()}return n}(this.moves,this.comparator)||"";return[e,this.moves.get(e)||[]]}},{key:"hasMoves",value:function(){return this.moves.size>0}}]),e}();function k(e,t,r){var n=Object(f.a)(e,2),a=n[0],o=n[1];return(0===a||a===t-1)&&(0===o||o===r-1)}function w(e,t,r){var n=Object(f.a)(e,2),a=n[0],o=n[1];return!k([a,o],r,t)&&(a<=1||a>=t-2)&&(o<=1||o>=r-2)}function B(e,t,r){var n=Object(f.a)(e,2),a=n[0],o=n[1];return!k([a,o],r,t)&&!w([a,o],r,t)&&(0===a||a===t-1||0===o||o===r-1)}function N(e,t,r){var n=Object(f.a)(e,2),a=n[0],o=n[1];return!w([a,o],r,t)&&(1===a||a===t-2||1===o||o===r-2)}function F(){return!k.apply(void 0,arguments)&&!w.apply(void 0,arguments)&&!B.apply(void 0,arguments)&&!N.apply(void 0,arguments)}function H(e,t){for(var r=0;r<e.length;++r)for(var n=0;n<e[r].length;++n)t(e[r][n],n,r)}function A(e,t,r,a,o,c){for(var u=[];;){if(r+=o,(t+=a)<0||t>=e[0].length||r<0||r>=e.length)return[];if(e[r][t].marker===n.FREE)return[];if(e[r][t].marker===c)return u;u.push([t,r])}}function T(e,t){var r=new Map;return H(e,(function(a,o,c){var u=function(e,t,r,a){if(e[r][t].marker!==n.FREE)return[];for(var o=[],c=-1;c<=1;++c)for(var u=-1;u<=1;++u)o=o.concat(A(e,t,r,c,u,a));return o}(e,o,c,t);u.length>0&&r.set(g([o,c]),u)})),r}function U(e,t){var r=[0,0];return 0===e||(t?(r[0]+=1+e,r[1]-=e):(r[0]-=e,r[1]+=1+e)),r}function W(e,t,r,n){e[r[1]][r[0]].marker=t;var a,o=Object(v.a)(n);try{for(o.s();!(a=o.n()).done;){var c=Object(f.a)(a.value,2),u=c[0];e[c[1]][u].marker=t}}catch(i){o.e(i)}finally{o.f()}}function P(e){var t=T(e,n.BOT);if(0===t.size)return 0;var r,a=e.length,o=e[0].length,c=function(e,t,r,n){return n.length-t.length},u=function(e,t,r,n){return t.length-n.length},i=[new M(k,c,o,a),new M(B,c,o,a),new M(F,u,o,a),new M(N,u,o,a),new M(w,u,o,a)],l="",s=[],d=Object(v.a)(t);try{for(d.s();!(r=d.n()).done;)for(var h=Object(f.a)(r.value,1)[0],p=0;p<i.length&&!i[p].tryAddMove(h,t.get(h)||[]);++p);}catch(L){d.e(L)}finally{d.f()}for(var m=0;m<i.length;++m)if(i[m].hasMoves()){var b=i[m].getBestMove();if(l=b[0],s=b[1],l)break}var O=y(l),j=Object(f.a)(O,2),g=j[0],E=j[1];W(e,n.BOT,[g,E],s),e[E][g].justPlaced=!0;var H,A=Object(v.a)(s);try{for(A.s();!(H=A.n()).done;){var U=Object(f.a)(H.value,2),P=U[0];e[U[1]][P].justFlipped=!0}}catch(L){A.e(L)}finally{A.f()}return s.length}function L(e){var t=e.value,r=e.onClick,a=e.handleMouseEnter,o=e.handleMouseLeave,c="square";return t.isValidMove&&(c+=" valid-move"),t.wouldBeFlipped&&(c+=" would-be-flipped"),t.noLongerWouldBeFlipped&&(c+=" no-longer-would-be-flipped"),t.justPlaced&&(c+=" just-placed"),t.justFlipped&&(c+=" just-flipped"),h.a.createElement("td",{className:c,onClick:r,onMouseEnter:a,onMouseLeave:o},h.a.createElement("div",{className:"square-container"},h.a.createElement("div",{className:"square-front"},O(t.marker)),h.a.createElement("div",{className:"square-back"},O(j(t.marker!==n.HUMAN)))))}function S(e){var t=e.boardWidth,r=e.boardHeight,a=e.nextPlayer,o=e.isGameOver,i=e.score,l=e.gameIsOver,s=e.otherPlayersTurn,p=e.updateScore,m=Object(d.useState)(function(e,t,r){for(var a=[],o=0;o<t;++o){for(var c=[],u=0;u<e;++u)c.push({marker:n.FREE,isValidMove:!1,wouldBeFlipped:!1,noLongerWouldBeFlipped:!1,justPlaced:!1,justFlipped:!1});a.push(c)}var i=Math.floor(e/2),l=Math.floor(t/2);return a[l][i].marker=n.BOT,a[l][i-1].marker=n.HUMAN,a[l-1][i].marker=n.HUMAN,a[l-1][i-1].marker=n.BOT,T(a,r).forEach((function(e,t){var r=y(t),n=Object(f.a)(r,2),o=n[0],c=n[1];a[c][o].isValidMove=!0})),a}(t,r,n.HUMAN)),O=Object(f.a)(m,2),j=O[0],M=O[1],k=Object(d.useState)(T(j,n.HUMAN)),w=Object(f.a)(k,2),B=w[0],N=w[1];Object(d.useEffect)((function(){(function(){var e=Object(u.a)(c.a.mark((function e(){var t,r,u,i,f;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a===n.BOT&&!o){e.next=2;break}return e.abrupt("return");case 2:return t=E(j),r=!1,u=P(t),i=U(u,!1),e.next=8,b(0===i[0]&&0===i[1]?0:500);case 8:(f=T(t,n.HUMAN)).size>0?(s(),H(t,(function(e,t,r){e.isValidMove=f.has(g([t,r]))}))):0===u&&(r=!0),r&&l(),M(t),N(f),p(i);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[i]);var F=function(e,t,r){var n=g([e,t]);if(B.has(n)){var a=r?function(e){e.wouldBeFlipped=!0,e.noLongerWouldBeFlipped=!1}:function(e){e.wouldBeFlipped=!1,e.noLongerWouldBeFlipped=!0};M((function(e){var t,r=E(e),o=Object(v.a)(B.get(n)||[]);try{for(o.s();!(t=o.n()).done;){var c=Object(f.a)(t.value,2),u=c[0],i=c[1];a(r[i][u])}}catch(l){o.e(l)}finally{o.f()}return r}))}};return h.a.createElement("div",null,h.a.createElement("table",null,h.a.createElement("tbody",null,j.map((function(e,t){return h.a.createElement("tr",{key:t,className:"board-row"},e.map((function(e,r){return h.a.createElement(L,{key:g([r,t]),value:e,onClick:function(){return function(e,t){var r;if(!o){var a=g([e,t]);if(B.has(a)){var c=E(j);W(c,n.HUMAN,[e,t],B.get(a)||[]);var u=U((null===(r=B.get(a))||void 0===r?void 0:r.length)||0,!0);H(c,(function(e){e.isValidMove=!1,e.wouldBeFlipped=!1,e.justPlaced=!1,e.justFlipped=!1,e.noLongerWouldBeFlipped=!1})),s(),M(c),N(new Map),p(u)}}}(r,t)},handleMouseEnter:function(){return F(r,t,!0)},handleMouseLeave:function(){return F(r,t,!1)}})})))})))))}function x(){var e=Object(d.useState)(!0),t=Object(f.a)(e,2),r=t[0],o=t[1],c=j(r),u=Object(d.useState)(!1),i=Object(f.a)(u,2),l=i[0],s=i[1],v=Object(d.useState)([2,2]),p=Object(f.a)(v,2),m=p[0],b=p[1],g=Object(d.useState)(0),y=Object(f.a)(g,2),E=y[0],M=y[1];return h.a.createElement("div",{className:"game"},h.a.createElement("p",{className:"status"},l?h.a.createElement(h.a.Fragment,null,"Game over. ",h.a.createElement("button",{onClick:function(){o(!0),s(!1),b([2,2]),M((function(e){return e+1}))}},"Reset")):"Next player: ".concat(O(c),"\n")),h.a.createElement("p",{className:"score"},"The score is ".concat(m[0]," for ").concat(O(n.HUMAN)," and ").concat(m[1]," for ").concat(O(n.BOT),".")),h.a.createElement("div",{className:"game-board"},h.a.createElement(S,{key:E,boardWidth:8,boardHeight:8,nextPlayer:c,isGameOver:l,score:m,gameIsOver:function(){return s(!0)},otherPlayersTurn:function(){return o(!r)},updateScore:function(e){b((function(t){var r=Object(a.a)(t);return r[0]+=e[0],r[1]+=e[1],r}))}})))}m.a.render(h.a.createElement(x,null),document.getElementById("root"))},20:function(e,t,r){}},[[13,1,2]]]);
//# sourceMappingURL=main.bb014516.chunk.js.map