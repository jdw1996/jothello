(this.webpackJsonpjothello=this.webpackJsonpjothello||[]).push([[0],{13:function(e,t,n){e.exports=n(14)},14:function(e,t,n){"use strict";n.r(t);var r,a=n(5),o=n(6),c=n.n(o),u=n(8),i=n(9),l=n(10),s=n(12),f=n(1),v=n(2),d=n(0),h=n.n(d),p=n(11),b=n.n(p);n(20);function m(e){return new Promise((function(t){return setTimeout(t,e)}))}function O(e){return e===r.HUMAN?"\ud83d\udc4d":e===r.BOT?"\ud83e\udd16":""}function j(e){return e?r.HUMAN:r.BOT}function g(e){return"".concat(e[0],",").concat(e[1])}function y(e){var t=e.split(",").map(Number);if(2===t.length)return t;throw new Error("Cannot convert given string to Coordinate!")}function E(e){var t,n=[],r=Object(v.a)(e);try{for(r.s();!(t=r.n()).done;){var a,o=t.value,c=[],u=Object(v.a)(o);try{for(u.s();!(a=u.n()).done;){var i=a.value;c.push(Object(s.a)({},i))}}catch(l){u.e(l)}finally{u.f()}n.push(c)}}catch(l){r.e(l)}finally{r.f()}return n}!function(e){e[e.HUMAN=0]="HUMAN",e[e.BOT=1]="BOT",e[e.FREE=2]="FREE"}(r||(r={}));var M=function(){function e(t,n,r,a){Object(i.a)(this,e),this.categorizer=void 0,this.comparator=void 0,this.boardWidth=void 0,this.boardHeight=void 0,this.moves=void 0,this.categorizer=t,this.comparator=n,this.boardWidth=r,this.boardHeight=a,this.moves=new Map}return Object(l.a)(e,[{key:"tryAddMove",value:function(e,t){return!!(this.categorizer(y(e),this.boardWidth,this.boardHeight)&&t.length>0)&&(this.moves.set(e,t),!0)}},{key:"getBestMove",value:function(){var e=function(e,t){var n,r=void 0,a=void 0,o=Object(v.a)(e);try{for(o.s();!(n=o.n()).done;){var c=Object(f.a)(n.value,2),u=c[0],i=c[1];(!r||!a||t(r,a,u,i)>0)&&(r=u,a=i)}}catch(l){o.e(l)}finally{o.f()}return r}(this.moves,this.comparator)||"";return[e,this.moves.get(e)||[]]}},{key:"hasMoves",value:function(){return this.moves.size>0}}]),e}();function k(e,t,n){var r=Object(f.a)(e,2),a=r[0],o=r[1];return(0===a||a===t-1)&&(0===o||o===n-1)}function B(e,t,n){var r=Object(f.a)(e,2),a=r[0],o=r[1];return!k([a,o],n,t)&&(a<=1||a>=t-2)&&(o<=1||o>=n-2)}function w(e,t,n){var r=Object(f.a)(e,2),a=r[0],o=r[1];return!k([a,o],n,t)&&!B([a,o],n,t)&&(0===a||a===t-1||0===o||o===n-1)}function H(e,t,n){var r=Object(f.a)(e,2),a=r[0],o=r[1];return!B([a,o],n,t)&&(1===a||a===t-2||1===o||o===n-2)}function N(){return!k.apply(void 0,arguments)&&!B.apply(void 0,arguments)&&!w.apply(void 0,arguments)&&!H.apply(void 0,arguments)}function F(e,t){for(var n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t(e[n][r],r,n)}function A(e,t,n,a,o,c){for(var u=[];;){if(n+=o,(t+=a)<0||t>=e[0].length||n<0||n>=e.length)return[];if(e[n][t].marker===r.FREE)return[];if(e[n][t].marker===c)return u;u.push([t,n])}}function T(e,t){var n=new Map;return F(e,(function(a,o,c){var u=function(e,t,n,a){if(e[n][t].marker!==r.FREE)return[];for(var o=[],c=-1;c<=1;++c)for(var u=-1;u<=1;++u)o=o.concat(A(e,t,n,c,u,a));return o}(e,o,c,t);u.length>0&&n.set(g([o,c]),u)})),n}function U(e,t,n,r){e[n[1]][n[0]].marker=t;var a,o=Object(v.a)(r);try{for(o.s();!(a=o.n()).done;){var c=Object(f.a)(a.value,2),u=c[0];e[c[1]][u].marker=t}}catch(i){o.e(i)}finally{o.f()}}function P(e){var t=T(e,r.BOT);if(0===t.size)return 0;var n,a=e.length,o=e[0].length,c=function(e,t,n,r){return r.length-t.length},u=function(e,t,n,r){return t.length-r.length},i=[new M(k,c,o,a),new M(w,c,o,a),new M(N,u,o,a),new M(H,u,o,a),new M(B,u,o,a)],l="",s=[],d=Object(v.a)(t);try{for(d.s();!(n=d.n()).done;)for(var h=Object(f.a)(n.value,1)[0],p=0;p<i.length&&!i[p].tryAddMove(h,t.get(h)||[]);++p);}catch(S){d.e(S)}finally{d.f()}for(var b=0;b<i.length;++b)if(i[b].hasMoves()){var m=i[b].getBestMove();if(l=m[0],s=m[1],l)break}var O=y(l),j=Object(f.a)(O,2),g=j[0],E=j[1];U(e,r.BOT,[g,E],s),e[E][g].justPlaced=!0;var F,A=Object(v.a)(s);try{for(A.s();!(F=A.n()).done;){var P=Object(f.a)(F.value,2),W=P[0];e[P[1]][W].justFlipped=!0}}catch(S){A.e(S)}finally{A.f()}return s.length}function W(e){var t=e.value,n=e.onClick,a=e.handleMouseEnter,o=e.handleMouseLeave,c="square";return t.isValidMove&&(c+=" valid-move"),t.wouldBeFlipped&&(c+=" would-be-flipped"),t.noLongerWouldBeFlipped&&(c+=" no-longer-would-be-flipped"),t.justPlaced&&(c+=" just-placed"),t.justFlipped&&(c+=" just-flipped"),h.a.createElement("td",{className:c,onClick:n,onMouseEnter:a,onMouseLeave:o},h.a.createElement("div",{className:"square-container"},h.a.createElement("div",{className:"square-front"},O(t.marker)),h.a.createElement("div",{className:"square-back"},O(j(t.marker!==r.HUMAN)))))}function S(e){var t=e.boardWidth,n=e.boardHeight,a=e.nextPlayer,o=e.isGameOver,i=e.score,l=e.gameIsOver,s=e.otherPlayersTurn,p=e.updateScore,b=Object(d.useState)(function(e,t,n){for(var a=[],o=0;o<t;++o){for(var c=[],u=0;u<e;++u)c.push({marker:r.FREE,isValidMove:!1,wouldBeFlipped:!1,noLongerWouldBeFlipped:!1,justPlaced:!1,justFlipped:!1});a.push(c)}var i=Math.floor(e/2),l=Math.floor(t/2);return a[l][i].marker=r.BOT,a[l][i-1].marker=r.HUMAN,a[l-1][i].marker=r.HUMAN,a[l-1][i-1].marker=r.BOT,T(a,n).forEach((function(e,t){var n=y(t),r=Object(f.a)(n,2),o=r[0],c=r[1];a[c][o].isValidMove=!0})),a}(t,n,r.HUMAN)),O=Object(f.a)(b,2),j=O[0],M=O[1],k=Object(d.useState)(T(j,r.HUMAN)),B=Object(f.a)(k,2),w=B[0],H=B[1];Object(d.useEffect)((function(){(function(){var e=Object(u.a)(c.a.mark((function e(){var t,n,u,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a===r.BOT&&!o){e.next=2;break}return e.abrupt("return");case 2:return t=E(j),n=!1,u=P(t),e.next=7,m(u?500:0);case 7:(i=T(t,r.HUMAN)).size>0?(s(),F(t,(function(e,t,n){e.isValidMove=i.has(g([t,n]))}))):0===u&&(n=!0),n&&l(),M(t),H(i),p(u,r.BOT);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[i]);var N=function(e,t,n){var r=g([e,t]);if(w.has(r)){var a=n?function(e){e.wouldBeFlipped=!0,e.noLongerWouldBeFlipped=!1}:function(e){e.wouldBeFlipped=!1,e.noLongerWouldBeFlipped=!0};M((function(e){var t,n=E(e),o=Object(v.a)(w.get(r)||[]);try{for(o.s();!(t=o.n()).done;){var c=Object(f.a)(t.value,2),u=c[0],i=c[1];a(n[i][u])}}catch(l){o.e(l)}finally{o.f()}return n}))}};return h.a.createElement("div",null,h.a.createElement("table",null,h.a.createElement("tbody",null,j.map((function(e,t){return h.a.createElement("tr",{key:t,className:"board-row"},e.map((function(e,n){return h.a.createElement(W,{key:g([n,t]),value:e,onClick:function(){return function(e,t){var n;if(!o){var a=g([e,t]);if(w.has(a)){var c=E(j);U(c,r.HUMAN,[e,t],w.get(a)||[]);var u=(null===(n=w.get(a))||void 0===n?void 0:n.length)||0;F(c,(function(e){e.isValidMove=!1,e.wouldBeFlipped=!1,e.justPlaced=!1,e.justFlipped=!1,e.noLongerWouldBeFlipped=!1})),s(),M(c),H(new Map),p(u,r.HUMAN)}}}(n,t)},handleMouseEnter:function(){return N(n,t,!0)},handleMouseLeave:function(){return N(n,t,!1)}})})))})))))}function L(){var e=Object(d.useState)(!0),t=Object(f.a)(e,2),n=t[0],o=t[1],c=j(n),u=Object(d.useState)(!1),i=Object(f.a)(u,2),l=i[0],s=i[1],v=Object(d.useState)([2,2]),p=Object(f.a)(v,2),b=p[0],m=p[1],g=Object(d.useState)(0),y=Object(f.a)(g,2),E=y[0],M=y[1],k=Object(d.useState)([]),B=Object(f.a)(k,2),w=B[0],H=B[1];return Object(d.useEffect)((function(){if(l){var e=b[0]>b[1]?r.HUMAN:r.BOT,t=Object(a.a)(w);t.push("Game over. Player ".concat(O(e)," wins.")),H(t)}}),[l]),Object(d.useEffect)((function(){var e=document.getElementById("game-updates");null!==e&&(e.scrollTop=((null===e||void 0===e?void 0:e.scrollHeight)||0)-((null===e||void 0===e?void 0:e.clientHeight)||0))}),[w]),h.a.createElement("div",{className:"game"},h.a.createElement("div",{id:"game-updates"},w.map((function(e,t){return h.a.createElement("p",{key:t},e)})),h.a.createElement("p",null,l&&h.a.createElement("button",{onClick:function(){o(!0),s(!1),m([2,2]),M((function(e){return e+1})),H([])}},"Reset"))),h.a.createElement("div",{id:"game-board"},h.a.createElement(S,{key:E,boardWidth:8,boardHeight:8,nextPlayer:c,isGameOver:l,score:b,gameIsOver:function(){return s(!0)},otherPlayersTurn:function(){return o(!n)},updateScore:function(e,t){0!==e&&(m((function(n){var o=Object(a.a)(n);return t===r.HUMAN?(o[0]+=1+e,o[1]-=e):(o[0]-=e,o[1]+=1+e),o})),H((function(n){var r=Object(a.a)(n);return r.push("Player ".concat(O(t)," flipped ").concat(e," piece").concat(e>1?"s":"",".")),r})))}})))}b.a.render(h.a.createElement(L,null),document.getElementById("root"))},20:function(e,t,n){}},[[13,1,2]]]);
//# sourceMappingURL=main.518f334c.chunk.js.map