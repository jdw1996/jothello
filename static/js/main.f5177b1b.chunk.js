(this.webpackJsonpjothello=this.webpackJsonpjothello||[]).push([[0],{13:function(e,t,n){e.exports=n(14)},14:function(e,t,n){"use strict";n.r(t);var r,a=n(11),o=n(5),c=n.n(o),i=n(7),u=n(8),l=n(9),s=n(12),f=n(1),v=n(2),d=n(0),h=n.n(d),p=n(10),b=n.n(p);n(20);function m(e){return new Promise((function(t){return setTimeout(t,e)}))}function O(e){return e===r.HUMAN?"\ud83d\udc4d":e===r.BOT?"\ud83e\udd16":""}function g(e){return e?r.HUMAN:r.BOT}function j(e){return"".concat(e[0],",").concat(e[1])}function y(e){var t=e.split(",").map(Number);if(2===t.length)return t;throw new Error("Cannot convert given string to Coordinate!")}function M(e){var t,n=[],r=Object(v.a)(e);try{for(r.s();!(t=r.n()).done;){var a,o=t.value,c=[],i=Object(v.a)(o);try{for(i.s();!(a=i.n()).done;){var u=a.value;c.push(Object(s.a)({},u))}}catch(l){i.e(l)}finally{i.f()}n.push(c)}}catch(l){r.e(l)}finally{r.f()}return n}!function(e){e[e.HUMAN=0]="HUMAN",e[e.BOT=1]="BOT",e[e.FREE=2]="FREE"}(r||(r={}));var E=function(){function e(t,n,r,a){Object(u.a)(this,e),this.categorizer=void 0,this.comparator=void 0,this.boardWidth=void 0,this.boardHeight=void 0,this.moves=void 0,this.categorizer=t,this.comparator=n,this.boardWidth=r,this.boardHeight=a,this.moves=new Map}return Object(l.a)(e,[{key:"tryAddMove",value:function(e,t){return!!(this.categorizer(y(e),this.boardWidth,this.boardHeight)&&t.length>0)&&(this.moves.set(e,t),!0)}},{key:"getBestMove",value:function(){var e=function(e,t){var n,r=void 0,a=void 0,o=Object(v.a)(e);try{for(o.s();!(n=o.n()).done;){var c=Object(f.a)(n.value,2),i=c[0],u=c[1];(!r||!a||t(r,a,i,u)>0)&&(r=i,a=u)}}catch(l){o.e(l)}finally{o.f()}return r}(this.moves,this.comparator)||"";return[e,this.moves.get(e)||[]]}},{key:"hasMoves",value:function(){return this.moves.size>0}}]),e}();function k(e,t,n){var r=Object(f.a)(e,2),a=r[0],o=r[1];return(0===a||a===t-1)&&(0===o||o===n-1)}function B(e,t,n){var r=Object(f.a)(e,2),a=r[0],o=r[1];return!k([a,o],n,t)&&(a<=1||a>=t-2)&&(o<=1||o>=n-2)}function w(e,t,n){var r=Object(f.a)(e,2),a=r[0],o=r[1];return!k([a,o],n,t)&&!B([a,o],n,t)&&(0===a||a===t-1||0===o||o===n-1)}function N(e,t,n){var r=Object(f.a)(e,2),a=r[0],o=r[1];return!B([a,o],n,t)&&(1===a||a===t-2||1===o||o===n-2)}function H(){return!k.apply(void 0,arguments)&&!B.apply(void 0,arguments)&&!w.apply(void 0,arguments)&&!N.apply(void 0,arguments)}function F(e,t){for(var n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t(e[n][r],r,n)}function A(e,t,n,a,o,c){for(var i=[];;){if(n+=o,(t+=a)<0||t>=e[0].length||n<0||n>=e.length)return[];if(e[n][t].marker===r.FREE)return[];if(e[n][t].marker===c)return i;i.push([t,n])}}function T(e,t){var n=new Map;return F(e,(function(a,o,c){var i=function(e,t,n,a){if(e[n][t].marker!==r.FREE)return[];for(var o=[],c=-1;c<=1;++c)for(var i=-1;i<=1;++i)o=o.concat(A(e,t,n,c,i,a));return o}(e,o,c,t);i.length>0&&n.set(j([o,c]),i)})),n}function U(e,t,n,r){e[n[1]][n[0]].marker=t;var a,o=Object(v.a)(r);try{for(o.s();!(a=o.n()).done;){var c=Object(f.a)(a.value,2),i=c[0];e[c[1]][i].marker=t}}catch(u){o.e(u)}finally{o.f()}}function S(e){var t=T(e,r.BOT);if(0===t.size)return 0;var n,a=e.length,o=e[0].length,c=function(e,t,n,r){return r.length-t.length},i=function(e,t,n,r){return t.length-r.length},u=[new E(k,c,o,a),new E(w,c,o,a),new E(H,i,o,a),new E(N,i,o,a),new E(B,i,o,a)],l="",s=[],d=Object(v.a)(t);try{for(d.s();!(n=d.n()).done;)for(var h=Object(f.a)(n.value,1)[0],p=0;p<u.length&&!u[p].tryAddMove(h,t.get(h)||[]);++p);}catch(W){d.e(W)}finally{d.f()}for(var b=0;b<u.length;++b)if(u[b].hasMoves()){var m=u[b].getBestMove();if(l=m[0],s=m[1],l)break}var O=y(l),g=Object(f.a)(O,2),j=g[0],M=g[1];U(e,r.BOT,[j,M],s),e[M][j].justPlaced=!0;var F,A=Object(v.a)(s);try{for(A.s();!(F=A.n()).done;){var S=Object(f.a)(F.value,2),P=S[0];e[S[1]][P].justFlipped=!0}}catch(W){A.e(W)}finally{A.f()}return s.length}function P(e){var t=e.value,n=e.onClick,a=e.handleMouseEnter,o=e.handleMouseLeave,c="square";return t.isValidMove&&(c+=" valid-move"),t.wouldBeFlipped&&(c+=" would-be-flipped"),t.noLongerWouldBeFlipped&&(c+=" no-longer-would-be-flipped"),t.justPlaced&&(c+=" just-placed"),t.justFlipped&&(c+=" just-flipped"),h.a.createElement("td",{className:c,onClick:n,onMouseEnter:a,onMouseLeave:o},h.a.createElement("div",{className:"square-container"},h.a.createElement("div",{className:"square-front"},O(t.marker)),h.a.createElement("div",{className:"square-back"},O(g(t.marker!==r.HUMAN)))))}function W(e){var t=e.boardWidth,n=e.boardHeight,a=e.nextPlayer,o=e.isGameOver,u=e.score,l=e.gameIsOver,s=e.otherPlayersTurn,p=e.updateScore,b=Object(d.useState)(function(e,t,n){for(var a=[],o=0;o<t;++o){for(var c=[],i=0;i<e;++i)c.push({marker:r.FREE,isValidMove:!1,wouldBeFlipped:!1,noLongerWouldBeFlipped:!1,justPlaced:!1,justFlipped:!1});a.push(c)}var u=Math.floor(e/2),l=Math.floor(t/2);return a[l][u].marker=r.BOT,a[l][u-1].marker=r.HUMAN,a[l-1][u].marker=r.HUMAN,a[l-1][u-1].marker=r.BOT,T(a,n).forEach((function(e,t){var n=y(t),r=Object(f.a)(n,2),o=r[0],c=r[1];a[c][o].isValidMove=!0})),a}(t,n,r.HUMAN)),O=Object(f.a)(b,2),g=O[0],E=O[1],k=Object(d.useState)(T(g,r.HUMAN)),B=Object(f.a)(k,2),w=B[0],N=B[1];Object(d.useEffect)((function(){(function(){var e=Object(i.a)(c.a.mark((function e(){var t,n,i,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a===r.BOT&&!o){e.next=2;break}return e.abrupt("return");case 2:return t=M(g),n=!1,i=S(t),e.next=7,m(i?500:0);case 7:(u=T(t,r.HUMAN)).size>0?(s(),F(t,(function(e,t,n){e.isValidMove=u.has(j([t,n]))}))):0===i&&(n=!0),n&&l(),E(t),N(u),p(i,r.BOT);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[u]);var H=function(e,t,n){var r=j([e,t]);if(w.has(r)){var a=n?function(e){e.wouldBeFlipped=!0,e.noLongerWouldBeFlipped=!1}:function(e){e.wouldBeFlipped=!1,e.noLongerWouldBeFlipped=!0};E((function(e){var t,n=M(e),o=Object(v.a)(w.get(r)||[]);try{for(o.s();!(t=o.n()).done;){var c=Object(f.a)(t.value,2),i=c[0],u=c[1];a(n[u][i])}}catch(l){o.e(l)}finally{o.f()}return n}))}};return h.a.createElement("div",null,h.a.createElement("table",null,h.a.createElement("tbody",null,g.map((function(e,t){return h.a.createElement("tr",{key:t,className:"board-row"},e.map((function(e,n){return h.a.createElement(P,{key:j([n,t]),value:e,onClick:function(){return function(e,t){var n;if(!o){var a=j([e,t]);if(w.has(a)){var c=M(g);U(c,r.HUMAN,[e,t],w.get(a)||[]);var i=(null===(n=w.get(a))||void 0===n?void 0:n.length)||0;F(c,(function(e){e.isValidMove=!1,e.wouldBeFlipped=!1,e.justPlaced=!1,e.justFlipped=!1,e.noLongerWouldBeFlipped=!1})),s(),E(c),N(new Map),p(i,r.HUMAN)}}}(n,t)},handleMouseEnter:function(){return H(n,t,!0)},handleMouseLeave:function(){return H(n,t,!1)}})})))})))))}function x(){var e=Object(d.useState)(!0),t=Object(f.a)(e,2),n=t[0],o=t[1],c=g(n),i=Object(d.useState)(!1),u=Object(f.a)(i,2),l=u[0],s=u[1],v=Object(d.useState)([2,2]),p=Object(f.a)(v,2),b=p[0],m=p[1],j=Object(d.useState)(0),y=Object(f.a)(j,2),M=y[0],E=y[1],k=Object(d.useState)("The game is about to begin."),B=Object(f.a)(k,2),w=B[0],N=B[1];return Object(d.useEffect)((function(){if(l){var e=b[0]>b[1]?r.HUMAN:r.BOT;N("Game over. Player ".concat(O(e)," wins."))}}),[l]),h.a.createElement("div",{className:"game"},h.a.createElement("p",null,w),h.a.createElement("p",null,h.a.createElement("span",{className:"human-score"+(n&&!l?" next-player":"")},"".concat(O(r.HUMAN)," : ").concat(b[0].toString().padStart(2,"0"))),"\u2003",h.a.createElement("span",{className:"bot-score"+(n||l?"":" next-player")},"".concat(O(r.BOT)," : ").concat(b[1].toString().padStart(2,"0"))),"\u2003",l&&h.a.createElement("button",{onClick:function(){o(!0),s(!1),m([2,2]),E((function(e){return e+1})),N("The game is about to begin.")}},"Reset")),h.a.createElement("div",{id:"game-board"},h.a.createElement(W,{key:M,boardWidth:8,boardHeight:8,nextPlayer:c,isGameOver:l,score:b,gameIsOver:function(){return s(!0)},otherPlayersTurn:function(){return o(!n)},updateScore:function(e,t){0!==e&&(m((function(n){var o=Object(a.a)(n);return t===r.HUMAN?(o[0]+=1+e,o[1]-=e):(o[0]-=e,o[1]+=1+e),o})),N("Player ".concat(O(t)," flipped ").concat(e," piece").concat(e>1?"s":"",".")))}})))}b.a.render(h.a.createElement(x,null),document.getElementById("root"))},20:function(e,t,n){}},[[13,1,2]]]);
//# sourceMappingURL=main.f5177b1b.chunk.js.map