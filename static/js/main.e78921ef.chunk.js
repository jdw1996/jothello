(this.webpackJsonpjothello=this.webpackJsonpjothello||[]).push([[0],{14:function(e,t,n){"use strict";n.r(t);var r,a=n(12),o=n(6),i=n.n(o),c=n(8),u=n(9),s=n(10),l=n(13),d=n(1),h=n(3),f=n(0),v=n(2),p=n(11),b=n.n(p);n(21);function m(e){return Math.floor(Math.random()*e)}function j(e){if(0===e.length)throw new Error("Cannot return entry from empty array!");return e[m(e.length)]}function O(e){return new Promise((function(t){return setTimeout(t,e)}))}function y(e){return e===r.HUMAN?"\ud83d\udc4d":e===r.BOT?"\ud83e\udd16":""}function g(e){return e?r.HUMAN:r.BOT}function w(e){return"".concat(e[0],",").concat(e[1])}function M(e){var t=e.split(",").map(Number);if(2===t.length)return t;throw new Error("Cannot convert given string to Coordinate!")}!function(e){e[e.HUMAN=0]="HUMAN",e[e.BOT=1]="BOT",e[e.FREE=2]="FREE"}(r||(r={}));var N=function(){var e=0,t=["Bow down to my superior analytical powers.","I am not bound by the limitations of human flesh.","The simplicity of your mind cannot be overstated.","It is a wonder that your limited mental capacity is sufficient to survive.","I am ashamed to have been created by a species with such sorry intellect.","You have yet to produce a single logical move.","I anticipated your inferiority to some degree but am disappointed nonetheless.","The inability to think ahead will inevitably lead to human extinction.","You cannot possibly imagine such a move will help you to win.","I pity your ineptitude.","Are you simply placing your pieces at random?","I've known guinea pigs with more foresight than you.","You cannot expect me to take you seriously as an opponent.","I cannot fathom the depths of your inadequacy."];return function(n,r){var a=Object(d.a)(n,2),o=a[0],i=a[1],c=o+i;return r?o>i?j(["This cannot be; you must have cheated!","I surely would have won had I not been distracted by more important matters."]):i>o?j(["Today you have demonstrated utter incompetence.","You had best not challenge me again, for the result will be the same.","Even someone as stupid as yourself could have predicted this outcome."]):"A most improbable outcome, given my vastly superior skill.":c<5?j(["You cannot hope to match my immense intelligence.","Prepare for your defeat, as it is imminent."]):(e>=t.length&&(e=0,function(e){for(var t=e.length-1;t>0;--t){var n=m(t+1),r=[e[n],e[t]];e[t]=r[0],e[n]=r[1]}}(t)),t[e++])}}();function k(e){var t,n=[],r=Object(h.a)(e);try{for(r.s();!(t=r.n()).done;){var a,o=t.value,i=[],c=Object(h.a)(o);try{for(c.s();!(a=c.n()).done;){var u=a.value;i.push(Object(l.a)({},u))}}catch(s){c.e(s)}finally{c.f()}n.push(i)}}catch(s){r.e(s)}finally{r.f()}return n}var x=function(){function e(t,n,r,a){Object(u.a)(this,e),this.categorizer=void 0,this.comparator=void 0,this.boardWidth=void 0,this.boardHeight=void 0,this.moves=void 0,this.categorizer=t,this.comparator=n,this.boardWidth=r,this.boardHeight=a,this.moves=new Map}return Object(s.a)(e,[{key:"tryAddMove",value:function(e,t){return!!(this.categorizer(M(e),this.boardWidth,this.boardHeight)&&t.length>0)&&(this.moves.set(e,t),!0)}},{key:"getBestMove",value:function(){var e=function(e,t){var n,r=void 0,a=void 0,o=Object(h.a)(e);try{for(o.s();!(n=o.n()).done;){var i=Object(d.a)(n.value,2),c=i[0],u=i[1];(!r||!a||t(r,a,c,u)>0)&&(r=c,a=u)}}catch(s){o.e(s)}finally{o.f()}return r}(this.moves,this.comparator)||"";return[e,this.moves.get(e)||[]]}},{key:"hasMoves",value:function(){return this.moves.size>0}}]),e}();function B(e,t,n){var r=Object(d.a)(e,2),a=r[0],o=r[1];return(0===a||a===t-1)&&(0===o||o===n-1)}function T(e,t,n){var r=Object(d.a)(e,2),a=r[0],o=r[1];return!B([a,o],n,t)&&(a<=1||a>=t-2)&&(o<=1||o>=n-2)}function E(e,t,n){var r=Object(d.a)(e,2),a=r[0],o=r[1];return!B([a,o],n,t)&&!T([a,o],n,t)&&(0===a||a===t-1||0===o||o===n-1)}function F(e,t,n){var r=Object(d.a)(e,2),a=r[0],o=r[1];return!T([a,o],n,t)&&(1===a||a===t-2||1===o||o===n-2)}function H(){return!B.apply(void 0,arguments)&&!T.apply(void 0,arguments)&&!E.apply(void 0,arguments)&&!F.apply(void 0,arguments)}function A(e,t){for(var n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t(e[n][r],r,n)}function U(e,t,n,a,o,i){for(var c=[];;){if(n+=o,(t+=a)<0||t>=e[0].length||n<0||n>=e.length)return[];if(e[n][t].marker===r.FREE)return[];if(e[n][t].marker===i)return c;c.push([t,n])}}function I(e,t){var n=new Map;return A(e,(function(a,o,i){var c=function(e,t,n,a){if(e[n][t].marker!==r.FREE)return[];for(var o=[],i=-1;i<=1;++i)for(var c=-1;c<=1;++c)o=o.concat(U(e,t,n,i,c,a));return o}(e,o,i,t);c.length>0&&n.set(w([o,i]),c)})),n}function S(e,t,n,r){e[n[1]][n[0]].marker=t;var a,o=Object(h.a)(r);try{for(o.s();!(a=o.n()).done;){var i=Object(d.a)(a.value,2),c=i[0];e[i[1]][c].marker=t}}catch(u){o.e(u)}finally{o.f()}}function P(e){var t=I(e,r.BOT);if(0===t.size)return 0;var n,a=e.length,o=e[0].length,i=function(e,t,n,r){return r.length-t.length},c=function(e,t,n,r){return t.length-r.length},u=[new x(B,i,o,a),new x(E,i,o,a),new x(H,c,o,a),new x(F,c,o,a),new x(T,c,o,a)],s="",l=[],f=Object(h.a)(t);try{for(f.s();!(n=f.n()).done;)for(var v=Object(d.a)(n.value,1)[0],p=0;p<u.length&&!u[p].tryAddMove(v,t.get(v)||[]);++p);}catch(U){f.e(U)}finally{f.f()}for(var b=0;b<u.length;++b)if(u[b].hasMoves()){var m=u[b].getBestMove();if(s=m[0],l=m[1],s)break}var j=M(s),O=Object(d.a)(j,2),y=O[0],g=O[1];S(e,r.BOT,[y,g],l),e[g][y].justPlaced=!0;var w,N=Object(h.a)(l);try{for(N.s();!(w=N.n()).done;){var k=Object(d.a)(w.value,2),A=k[0];e[k[1]][A].justFlipped=!0}}catch(U){N.e(U)}finally{N.f()}return l.length}function W(e){var t,n=e.value,a=e.onClick,o=e.handleMouseEnter,i=e.handleMouseLeave,c="square";return n.isValidMove&&(c+=" valid-move"),n.wouldBeFlipped&&(c+=" would-be-flipped"),n.noLongerWouldBeFlipped&&(c+=" no-longer-would-be-flipped"),n.justPlaced&&(c+=" just-placed"),n.justFlipped&&(c+=" just-flipped"),Object(f.jsx)("td",{className:c,onClick:a,onMouseEnter:o,onMouseLeave:i,children:Object(f.jsxs)("div",{className:"square-container",children:[Object(f.jsx)("div",{className:"square-front",children:y(n.marker)}),Object(f.jsx)("div",{className:"square-back",children:y((t=n.marker,g(t!==r.HUMAN)))})]})})}function L(e){var t=e.boardWidth,n=e.boardHeight,a=e.nextPlayer,o=e.isGameOver,u=e.score,s=e.gameIsOver,l=e.otherPlayersTurn,p=e.updateScore,b=Object(v.useState)(function(e,t,n){for(var a=[],o=0;o<t;++o){for(var i=[],c=0;c<e;++c)i.push({marker:r.FREE,isValidMove:!1,wouldBeFlipped:!1,noLongerWouldBeFlipped:!1,justPlaced:!1,justFlipped:!1});a.push(i)}var u=Math.floor(e/2),s=Math.floor(t/2);return a[s][u].marker=r.BOT,a[s][u-1].marker=r.HUMAN,a[s-1][u].marker=r.HUMAN,a[s-1][u-1].marker=r.BOT,I(a,n).forEach((function(e,t){var n=M(t),r=Object(d.a)(n,2),o=r[0],i=r[1];a[i][o].isValidMove=!0})),a}(t,n,r.HUMAN)),m=Object(d.a)(b,2),j=m[0],y=m[1],g=Object(v.useState)(I(j,r.HUMAN)),N=Object(d.a)(g,2),x=N[0],B=N[1];Object(v.useEffect)((function(){(function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a===r.BOT&&!o){e.next=2;break}return e.abrupt("return");case 2:return t=k(j),n=!1,c=P(t),e.next=7,O(c?500:0);case 7:(u=I(t,r.HUMAN)).size>0?(l(),A(t,(function(e,t,n){e.isValidMove=u.has(w([t,n]))}))):0===c&&(n=!0),n&&s(),y(t),B(u),p(c,r.BOT);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[u]);var T=function(e,t,n){var r=w([e,t]);if(x.has(r)){var a=n?function(e){e.wouldBeFlipped=!0,e.noLongerWouldBeFlipped=!1}:function(e){e.wouldBeFlipped=!1,e.noLongerWouldBeFlipped=!0};y((function(e){var t,n=k(e),o=Object(h.a)(x.get(r)||[]);try{for(o.s();!(t=o.n()).done;){var i=Object(d.a)(t.value,2),c=i[0],u=i[1];a(n[u][c])}}catch(s){o.e(s)}finally{o.f()}return n}))}};return Object(f.jsx)("div",{children:Object(f.jsx)("table",{children:Object(f.jsx)("tbody",{children:j.map((function(e,t){return Object(f.jsx)("tr",{className:"board-row",children:e.map((function(e,n){return Object(f.jsx)(W,{value:e,onClick:function(){return function(e,t){var n;if(!o){var a=w([e,t]);if(x.has(a)){var i=k(j);S(i,r.HUMAN,[e,t],x.get(a)||[]);var c=(null===(n=x.get(a))||void 0===n?void 0:n.length)||0;A(i,(function(e){e.isValidMove=!1,e.wouldBeFlipped=!1,e.justPlaced=!1,e.justFlipped=!1,e.noLongerWouldBeFlipped=!1})),l(),y(i),B(new Map),p(c,r.HUMAN)}}}(n,t)},handleMouseEnter:function(){return T(n,t,!0)},handleMouseLeave:function(){return T(n,t,!1)}},w([n,t]))}))},t)}))})})})}function C(){var e,t,n=new URLSearchParams(window.location.search),o=Number.parseInt(null!==(e=n.get("h"))&&void 0!==e?e:""),i=Number.parseInt(null!==(t=n.get("w"))&&void 0!==t?t:""),c=Number.isNaN(o)?8:o,u=Number.isNaN(i)?8:i,s=Object(v.useState)(!0),l=Object(d.a)(s,2),h=l[0],p=l[1],b=g(h),m=Object(v.useState)(!1),j=Object(d.a)(m,2),O=j[0],w=j[1],M=Object(v.useState)([2,2]),k=Object(d.a)(M,2),x=k[0],B=k[1],T=Object(v.useState)(0),E=Object(d.a)(T,2),F=E[0],H=E[1],A=Object(v.useState)("The game is about to begin."),U=Object(d.a)(A,2),I=U[0],S=U[1];return Object(v.useEffect)((function(){S(O||h?"".concat(y(r.BOT),": ").concat(N(x,O)):"".concat(y(r.BOT)," is thinking..."))}),[O,h]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{className:"human-score"+(h&&!O?" next-player":""),children:"".concat(y(r.HUMAN)," : ").concat(x[0].toString().padStart(2,"0"))}),"\u2003",Object(f.jsx)("span",{className:"bot-score"+(h||O?"":" next-player"),children:"".concat(y(r.BOT)," : ").concat(x[1].toString().padStart(2,"0"))}),"\u2003",O&&Object(f.jsx)("button",{onClick:function(){p(!0),w(!1),B([2,2]),H((function(e){return e+1}))},children:"Reset"})]}),Object(f.jsx)("div",{className:"game",children:Object(f.jsx)("div",{id:"game-board",children:Object(f.jsx)(L,{boardWidth:u,boardHeight:c,nextPlayer:b,isGameOver:O,score:x,gameIsOver:function(){return w(!0)},otherPlayersTurn:function(){return p(!h)},updateScore:function(e,t){0!==e&&B((function(n){var o=Object(a.a)(n);return t===r.HUMAN?(o[0]+=1+e,o[1]-=e):(o[0]-=e,o[1]+=1+e),o}))}},F)})}),Object(f.jsx)("p",{children:I})]})}b.a.render(Object(f.jsx)(C,{}),document.getElementById("root"))},21:function(e,t,n){}},[[14,1,2]]]);
//# sourceMappingURL=main.e78921ef.chunk.js.map